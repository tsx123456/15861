System.register("chunks:///_virtual/FestivalBetItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Common.ts","./FestivalProxy.ts"],(function(t){var e,n,i,o,r,a,s,c,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Label,c=t.Component},function(t){l=t.Common},function(t){u=t.default,p=t.FestivalGameEvent}],execute:function(){var f,v,m,h,y,_;r._RF.push({},"7d0f060tRdHQ6b/OGLG7joF","FestivalBetItem",void 0);var d=a.ccclass,F=a.property,b=a.menu;t("default",(f=d("FestivalBetItem"),v=b("game/FestivalGame/FestivalBetItem"),m=F(s),f(h=v((_=e((y=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"txt_bet",_,o(e)),e._count=0,e}n(e,t);var r=e.prototype;return r.onClickBet=function(){u.emit(p.SELECT_BET,this._count)},r.setBet=function(t,e){void 0===e&&(e=!1),this._count=t;var n=t*(e?1.5:1);this.txt_bet.string=l.ChangeMoneyShow(n,2)},e}(c)).prototype,"txt_bet",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalCardAni.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,s,r,o,a,h,d,u,l,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,a=t._decorator,h=t.Sprite,d=t.v3,u=t.tween,l=t.UITransform,c=t.Component}],execute:function(){var f,v,p,g,C,m,y;o._RF.push({},"557f7adpUxPwb16aA+P2htI","FestivalCardAni",void 0);var P=a.ccclass,_=a.property,x=a.menu,F=0,S=1,b=2,H=3,R=4;t("default",(f=P("FestivalCardAni"),v=x("game/FestivalGame/FestivalCardAni"),p=_([h]),f(g=v((m=i((C=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,n(i,"runningCard",m,s(i)),n(i,"stepHeight",y,s(i)),i.moveOut=100,i.delayTime=0,i.moveStep=60,i.finishCallBack=null,i._state=F,i.result=void 0,i.leftResultCount=3,i.endNode=void 0,i.endIndex=3,i.fixStep=void 0,i._index=0,i.cards=void 0,i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.initEvent()},o.setData=function(t){this._index=t.index,this.cards=t.cards},o.initCard=function(t){if(void 0===t&&(t=null),t)for(var i=0;i<this.runningCard.length;i++){var e=t[i];this.runningCard[i].spriteFrame=this.cards[e],this.runningCard[i].node.scale=d(0,0,1),u(this.runningCard[i].node).delay(.1*i).to(.3,{scale:d(1,1,1)}).start()}else for(var n,s=0,o=r(this.runningCard);!(n=o()).done;){var a=n.value;this.randCard(a),a.node.scale=d(0,0,1),u(a.node).delay(.1*s).to(.3,{scale:d(1,1,1)}).start(),s++}},o.start=function(){},o.initEvent=function(){},o.removeEvent=function(){},o.onDestroy=function(){this.removeEvent()},o.randCard=function(t){var i=Math.floor(Math.random()*this.cards.length);t.spriteFrame=this.cards[i]},o.resultCard=function(t){if(this.leftResultCount>0){this.leftResultCount--;var i=this.result[this.leftResultCount];t.spriteFrame=this.cards[i],t.node.getComponent(l).priority=this.leftResultCount}},o.showResult=function(t,i){if(void 0===i&&(i=!1),i)for(var e=0;e<3;e++)this.runningCard[e+1].spriteFrame=this.cards[t[e]];else this.result=t,this._state=H},o.show=function(){for(var t,i=r(this.runningCard);!(t=i()).done;){t.value.node.active=!0}},o.hide=function(t){var i=this.endIndex+t-2;i<0&&(i=5+i),this.runningCard[i].node.active=!1},o.run=function(t){void 0===t&&(t=0),this.show(),this.delayTime=t,this.moveStep=60,this._state=S,this.leftResultCount=3,this.endNode=null},o.update=function(t){var i=this;switch(this._state){case S:this.delayTime-=t,this.delayTime<=0&&(this._state=b);break;case b:for(var e=this.runningCard.length,n=0;n<e;n++){var s=this.runningCard[n].node;s.setPosition(0,s.getPosition().y-this.moveStep),s.getPosition().y<-(this.stepHeight+this.moveOut)&&(s.setPosition(0,s.getPosition().y+5*this.stepHeight),this.randCard(this.runningCard[n]))}break;case H:this.moveStep-=2,this.moveStep<20&&(this.moveStep=20);for(var r=this.runningCard.length,o=0;o<r;o++){var a=this.runningCard[o].node;a.setPosition(0,a.getPosition().y-this.moveStep),a.getPosition().y<-(this.stepHeight+this.moveOut)&&(a.setPosition(0,a.getPosition().y+5*this.stepHeight),this.resultCard(this.runningCard[o]),2==this.leftResultCount&&(this.endNode=a,this.endIndex=o)),a==this.endNode&&a.getPosition().y<=-this.stepHeight-5&&(this._state=R,this.fixStep=a.getPosition().y+this.stepHeight)}break;case R:for(var h=this.runningCard.length,l=function(){var t=i.runningCard[c].node,e=t.getPosition().y-i.fixStep,n=c;u(t).to(.1,{position:d(t.position.x,e)}).call((function(){n==h-1&&i.finishCallBack&&i.finishCallBack(i._index)})).start()},c=0;c<h;c++)l();this._state=F}},i}(c)).prototype,"runningCard",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=i(C.prototype,"stepHeight",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 140}}),g=C))||g)||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalDef.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./FestivalProxy.ts"],(function(t){var n,e,r,i,a;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,r=t.AudioClip},function(t){i=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"4aa6dWu0RhD86s+/bO5Ttzf","FestivalDef",void 0);var o=t("FestivalDef",function(){function t(){}return t.palyAudio=function(t,n){void 0===n&&(n=null);var e="sound/"+t;a.bundle.load(e,r,(function(t,e){if(n){var r=i.instance.playSound(e);n(r)}else i.instance.playOneShot(e)}))},t.palyMusic=function(t){var n="sound/"+t;a.bundle.load(n,r,(function(t,n){i.instance.playGameMusic(n,!0)}))},t.init=function(){},t.getRand=function(t){for(var e,r=this.rates[t],i=0,a=n(r);!(e=a()).done;){i+=e.value}for(var o=Math.round(Math.random()*i),u=r.length-1;u>=0;u--){var l=r[u];if(i-o<l)return u;i-=l}return Math.floor(Math.random()*this.cardlines[t].length)},t.randRusult=function(t,e){void 0===e&&(e=!1);var r=e?1.5:1;this.tryGold-=t*r;for(var i=[],a=0;a<3;a++)i[a]=this.cardlines[a][this.getRand(a)],i[a+3]=this.cardlines[a][this.getRand(a)],i[a+6]=this.cardlines[a][this.getRand(a)];for(var o,u=[this.getMultple(),this.getMultple(),this.getMultple()],l=0,s=this.checkPrize(i),d=s.prizeInfo,f=s.lines,c=n(d);!(o=c()).done;){l+=o.value.Odds*t/5*u[1]}return this.tryGold+=l,{openNums:i,prizeInfo:d,prizeAmount:l,prizeIdx:f}},t.getMultple=function(){for(var t=[1,2,3,5,10,15],n=[30,15,10,6,3,2],e=0,r=0,i=n;r<i.length;r++){e+=i[r]}for(var a=0,o=Math.round(Math.random()*e),u=n.length-1;u>=0;u--){var l=n[u];if(e-o<l){a=t[u];break}e-=l}return a},t.checkPrize=function(n){for(var e=function(n,e){for(var r=null,i=0,a=n[i];1==a;)a=n[++i];for(var o=++i;o<3&&(n[o]==a||1==n[o]);o++)i++;return t.odds[a-1]&&3==i&&(r={Odds:t.odds[a-1],PrizeNum:'{"Num":'+i+',"Symbol":'+a+"}",PrizeType:e}),r},r=[],i=[],a=0;a<this.lines.length;a++){for(var o=this.lines[a],u=[],l=0,s=o.length;l<s;l++)u[l]=n[o[l]];var d=e(u,a);d&&(r.push(d),i.push(o))}return{prizeInfo:r,lines:i}},t}());o.audio={AWARD1:"award1",AWARD2:"award2",BG:"bg",TURN:"turn",WILD:"wild"},o.tryGold=1e8,o.odds=[2,5,8,10,12,15,20,25],o.rates=[[8,8,8,8,8,8,8,44],[8,8,8,8,8,8,8,44],[300,120,75,60,50,40,30,24]],o.lines=[[0,1,2],[3,4,5],[6,7,8],[0,4,8],[6,4,2]],o.cardlines=[[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8],[1,2,3,4,5,6,7,8]],e._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalGame",["./FestivalBetItem.ts","./FestivalCardAni.ts","./FestivalDef.ts","./FestivalGoldActionItem.ts","./FestivalHelp.ts","./FestivalRecord.ts","./FestivalRecordItem.ts","./FestivalRoom.ts","./FestivalScene.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/FestivalGoldActionItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,s,i,a,r,c,l;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,s=t._decorator,i=t.Tween,a=t.tween,r=t.v3,c=t.Label,l=t.Component}],execute:function(){var u;o._RF.push({},"b2435dnyUVJjb23FkF20fXF","FestivalGoldActionItem",void 0);var d=s.ccclass,p=(s.property,s.menu);t("default",d("FestivalGoldActionItem")(u=p("game/FestivalGame/FestivalGoldActionItem")(u=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onLoad=function(){},n(o,[{key:"active",set:function(t){this.node.active=t,t&&(i.stopAllByTarget(this.node),a(this.node).repeatForever(a(this.node).to(.2,{scale:r(1.2,1.2,1)}).to(.1,{scale:r(1,1,1)}).delay(.8).start()).start())}},{key:"string",set:function(t){this.node.getComponent(c).string=t}}]),o}(l))||u)||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalHelp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18n.ts","./ViewManager.ts","./Common.ts"],(function(e){var t,r,n,i,l,u,o,a,d,c,s,p,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,u=e._decorator,o=e.RichText,a=e.Node,d=e.find,c=e.Label,s=e.Component},function(e){p=e.default},function(e){f=e.default},function(e){m=e.Common}],execute:function(){var O,b,g,h,y,v,w,I,z,F,C,P,H,L,R,_;l._RF.push({},"7bf18mbJ+xBu7RwfT8mpyA9","FestivalHelp",void 0);var x=u.ccclass,B=u.menu,D=u.property,T={Item1:{Odd5:5,Odd4:1.5,Odd3:.5},Item2:{Odd5:2,Odd4:.8,Odd3:.4},Item3:{Odd5:1.75,Odd4:.6,Odd3:.3},Item4:{Odd5:1.25,Odd4:.4,Odd3:.25},Item5:{Odd5:1,Odd4:.2,Odd3:.1},Item6:{Odd5:.9,Odd4:.15,Odd3:.08},Item7:{Odd5:.8,Odd4:.12,Odd3:.06},Item8:{Odd5:.7,Odd4:.1,Odd3:.05}};e("default",(O=x("FestivalHelp"),b=B("game/FestivalGame/FestivalHelp"),g=D(o),h=D(o),y=D(o),v=D(o),w=D(o),I=D(a),O(z=b((C=t((F=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return t=e.call.apply(e,[this].concat(l))||this,n(t,"rule2",C,i(t)),n(t,"rule3",P,i(t)),n(t,"rule5",H,i(t)),n(t,"rule7",L,i(t)),n(t,"rule8",R,i(t)),n(t,"itemParent",_,i(t)),t}r(t,e);var l=t.prototype;return l.onLoad=function(){for(var e in this.rule2.string=p.t("rule2"),this.rule3.string=p.t("rule3"),this.rule5.string=p.t("rule5"),this.rule7.string=p.t("rule7"),this.rule8.string=p.t("rule8"),T){var t=this.itemParent.getChildByName(e),r=T[e];for(var n in r){d("Odd/"+n,t).getComponent(c).string=m.numberFormat(r[n],2)}}},l.onClickClose=function(){f.instance.closePopView(this.node)},t}(s)).prototype,"rule2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(F.prototype,"rule3",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(F.prototype,"rule5",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"rule7",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"rule8",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(F.prototype,"itemParent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=F))||z)||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalRecord.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetManager.ts","./MainManager.ts","./I18n.ts","./ViewManager.ts"],(function(e){var t,a,n,i,o,r,c,l,s,u,g,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,c=e.Label,l=e.Node,s=e.Component},function(e){u=e.default},function(e){g=e.default},function(e){p=e.default},function(e){f=e.default}],execute:function(){var _,h,d,P,v,y,b,R,m,z,D,B;o._RF.push({},"a2de3ejKlhA2qmvV8lnjZ8Y","FestivalRecord",void 0);var S=r.ccclass,w=r.property,T=r.menu,F=(r.inspector,g.instance.getConfigManager()),L=g.instance.getEventManager();e("default",(_=S("FestivalRecord"),h=T("game/FestivalGame/FestivalRecord"),d=w(gts.List),P=w(c),v=w(l),y=w(l),_(b=h((m=t((R=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"scrollView_content",m,i(t)),n(t,"Label_curPage",z,i(t)),n(t,"Button_last",D,i(t)),n(t,"Button_next",B,i(t)),t._curPage=0,t._totalPage=0,t._lastPage=1,t._pageSize=13,t._gameType="slotSpringFestival",t}a(t,e);var o=t.prototype;return o.onLoad=function(){},o.start=function(){u.instance.sendOnlineData(F.protocolHall.getRecord,{Offset:0,PageSize:this._pageSize,RecordType:this._gameType})},o.onClickClose=function(){f.instance.closePopView(this.node)},o.onBefore=function(){this._lastPage=this._curPage,this._curPage--,this._curPage<0&&(this._curPage=0);var e=this._curPage*this._pageSize;u.instance.sendOnlineData(F.protocolHall.getRecord,{Offset:e,PageSize:this._pageSize,RecordType:this._gameType})},o.onNext=function(){this._lastPage=this._curPage,this._curPage++;var e=this._curPage*this._pageSize;u.instance.sendOnlineData(F.protocolHall.getRecord,{Offset:e,PageSize:this._pageSize,RecordType:this._gameType})},o.recvData=function(e){if(e.cmd==F.protocolHall.getRecord&&e.Data.RecordType==this._gameType){var t=e.Data;if(!t||!t.BetRecord||0==t.BetRecord.length)return this._curPage=this._lastPage,void(this.Button_next.active=!1);this.Button_last.active=this._curPage>0,this.Button_next.active=t.NextPage,this.Label_curPage.string=p.t("page")+":"+(this._curPage+1),this.scrollView_content.setData(t.BetRecord)}},o.onDisable=function(){L.off(F.protocolHall.getRecord,this.recvData,this)},o.onEnable=function(){L.on(F.protocolHall.getRecord,this.recvData,this)},t}(s)).prototype,"scrollView_content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(R.prototype,"Label_curPage",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"Button_last",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(R.prototype,"Button_next",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=R))||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalRecordItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AutoChangeParent.ts","./Common.ts"],(function(e){var t,i,n,a,o,l,r,u,c,s,b,m,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){l=e.cclegacy,r=e._decorator,u=e.Node,c=e.Label,s=e.UIOpacity,b=e.color,m=e.Component},function(e){p=e.default},function(e){d=e.Common}],execute:function(){var f,g,_,h,y,v,L,N,I,w,z,C,F,R,U,D,A,P,O,S,B,G;l._RF.push({},"1526cWPWTRAd4NlD9MPuNab","FestivalRecordItem",void 0);var M=r.ccclass,T=r.property,k=r.menu;r.inspector,e("default",(f=M("FestivalRecordItem"),g=k("game/FestivalGame/FestivalRecordItem"),_=T(u),h=T(u),y=T(u),v=T(c),L=T(c),N=T(c),I=T(c),w=T(c),z=T(c),f(C=g((R=t((F=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"content_label",R,a(t)),n(t,"Node_label",U,a(t)),n(t,"Sprite_bg",D,a(t)),n(t,"Label_gameNo",A,a(t)),n(t,"Label_date",P,a(t)),n(t,"Label_time",O,a(t)),n(t,"Label_win",S,a(t)),n(t,"Label_bet",B,a(t)),n(t,"Label_gold",G,a(t)),t._gtItem=null,t}i(t,e);var l=t.prototype;return l.onLoad=function(){},l.onEnable=function(){this.node.active=!0,this.Node_label.active=!0},l.onDisable=function(){},l.start=function(){var e=this;p.Bind(this.Node_label,this.content_label,!0).OnUpdateNotify((function(t){e.Node_label.getComponent(s).opacity=e.node.getComponent(s).opacity,e.Node_label.active=e.node.active,e.Node_label.scale=e.node.scale}),this),this.item&&(this.item.OnDataChangedNotify((function(){e.UpdateUI()}),this),this.item.OnHideNotify((function(){e.node.active=!1,e.Node_label.active=!1}),this),this.UpdateUI())},l.UpdateUI=function(){var e=this.item.data;this.Sprite_bg.active=this.item.itemIndex%2!=0,this.Label_gameNo.string=d.setGameNo(e.GameNo);var t=d.getRecordResult(e);this.Label_gold.string=t;var i=d.getTimeFormat(e.CreateAt);this.Label_time.string=i.time,this.Label_date.string=i.date,this.Label_bet.string=d.moneyFormat(e.BetAmount);var n=d.moneyFormat(Math.abs(e.Income));e.Income<0&&(n="-"+n),this.Label_win.string=n,this.Label_win.color=e.Income<=0?b(104,245,1,255):b(255,0,0,255)},o(t,[{key:"item",get:function(){return this._gtItem||(this._gtItem=this.getComponent(gts.ListItem)),this._gtItem}}]),t}(m)).prototype,"content_label",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(F.prototype,"Node_label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(F.prototype,"Sprite_bg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(F.prototype,"Label_gameNo",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(F.prototype,"Label_date",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"Label_time",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(F.prototype,"Label_win",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(F.prototype,"Label_bet",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(F.prototype,"Label_gold",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=F))||C)||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18n.ts","./ProxyMgr.ts","./DataManager.ts","./NetManager.ts","./ScrollNumLabel.ts","./FestivalCardAni.ts","./FestivalDef.ts","./FestivalGoldActionItem.ts","./Common.ts","./MainManager.ts","./FestivalProxy.ts","./GameDef.ts","./AudioManager.ts","./EventManager.ts","./ViewManager.ts"],(function(t){var e,i,n,o,a,s,r,l,u,c,h,f,d,_,b,m,p,g,v,y,w,L,C,k,x,T,F,A,S,B,z,I,D,R,M,N,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,r=t._decorator,l=t.SpriteFrame,u=t.sp,c=t.Label,h=t.Node,f=t.Button,d=t.Sprite,_=t.Toggle,b=t.instantiate,m=t.sys,p=t.UIOpacity,g=t.tween,v=t.Tween,y=t.Component},function(t){w=t.default},function(t){L=t.default},function(t){C=t.default,k=t.UserKey},function(t){x=t.default},function(t){T=t.default},function(t){F=t.default},function(t){A=t.FestivalDef},function(t){S=t.default},function(t){B=t.Common},function(t){z=t.default},function(t){I=t.default,D=t.FestivalGameEvent},function(t){R=t.GameDef},function(t){M=t.default},function(t){N=t.default},function(t){E=t.default}],execute:function(){var G,P,W,O,H,U,K,Q,V,j,J,q,X,Y,Z,$,tt,et,it,nt,ot,at,st,rt,lt,ut,ct,ht,ft,dt,_t,bt,mt,pt,gt,vt,yt,wt,Lt,Ct,kt,xt,Tt,Ft,At,St,Bt,zt,It,Dt,Rt,Mt,Nt,Et,Gt,Pt,Wt,Ot,Ht,Ut;s._RF.push({},"eeacdUjkQJPB5yaIMfntsx0","FestivalRoom",void 0);var Kt=r.ccclass,Qt=r.property,Vt=r.menu,jt=z.instance.getConfigManager(),Jt=0,qt=1,Xt=2,Yt=3,Zt=4,$t=5,te=.8;t("default",(G=Kt("FestivalRoom"),P=Vt("game/FestivalGame/FestivalRoom"),W=Qt(l),O=Qt(u.SkeletonData),H=Qt(F),U=Qt(u.Skeleton),K=Qt(c),Q=Qt(T),V=Qt(c),j=Qt(h),J=Qt(h),q=Qt(u.Skeleton),X=Qt(h),Y=Qt(S),Z=Qt(h),$=Qt(h),tt=Qt(h),et=Qt(h),it=Qt(c),nt=Qt(f),ot=Qt(h),at=Qt(c),st=Qt(h),rt=Qt(c),lt=Qt(l),ut=Qt(d),ct=Qt(c),ht=Qt(T),ft=Qt(h),dt=Qt(_),G(_t=P((mt=e((bt=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"cardSpriteFrames",mt,o(e)),n(e,"spines",pt,o(e)),n(e,"aniLines",gt,o(e)),n(e,"sp_start",vt,o(e)),n(e,"txt_bet",yt,o(e)),n(e,"txt_win",wt,o(e)),n(e,"txt_gold",Lt,o(e)),n(e,"node_spineMask",Ct,o(e)),n(e,"node_spineParent",kt,o(e)),n(e,"spine_lion",xt,o(e)),n(e,"node_menu",Tt,o(e)),n(e,"node_goldActions",Ft,o(e)),n(e,"node_autoCancel",At,o(e)),n(e,"node_autoBg",St,o(e)),n(e,"node_titleNormal",Bt,o(e)),n(e,"node_titleFree",zt,o(e)),n(e,"txt_freeCount",It,o(e)),n(e,"btn_locks",Dt,o(e)),n(e,"node_freeBg",Rt,o(e)),n(e,"txt_freeTime",Mt,o(e)),n(e,"Node_freeEnd",Nt,o(e)),n(e,"Label_win",Et,o(e)),n(e,"bgs",Gt,o(e)),n(e,"gameBg",Pt,o(e)),n(e,"txt_autoTimes",Wt,o(e)),n(e,"txt_total",Ot,o(e)),n(e,"node_betList",Ht,o(e)),n(e,"toggle_menu",Ut,o(e)),e._runDelay=.2,e._runTime=te,e._state=Jt,e._lock=!1,e._bet=0,e._betIndex=0,e._auto=!1,e._try=!1,e._showLineIndex=0,e._autoTime=0,e._isFree=!1,e.freeLock=!1,e.freeTimeLeft=0,e.turnAudioId=null,e.finishColCount=0,e.isWaitBet=!1,e}i(e,t);var s=e.prototype;return s.start=function(){window.addEventListener("customEventFromHTML",this.onClickHTMLStartBtn.bind(this))},s.onClickHTMLStartBtn=function(){this.txt_win.formatFunc=function(t){return B.numberFormat(t/R.Constant.moneyRatio,2)},this.txt_total.formatFunc=function(t){return B.numberFormat(t/R.Constant.moneyRatio,2)},this.clear(),this.initEvent(),this.updateGold(),this.changeBtnActive(!0),this.loadAni()},s.loadAni=function(){for(var t=this,e=function(e){t.aniLines[e].setData({index:e,cards:t.cardSpriteFrames}),t.scheduleOnce((function(){t.aniLines[e].initCard()}),.1*e)},i=0;i<this.aniLines.length;i++)e(i);A.palyAudio(A.audio.WILD)},s.hideSpine=function(){for(var t,e=this.node_spineParent.children,i=a(e);!(t=i()).done;){t.value.active=!1}for(var n,o=a(this.aniLines);!(n=o()).done;){n.value.show()}for(var s,r=a(this.node_goldActions);!(s=r()).done;){s.value.active=!1}},s.showSpine=function(t,e){var i=this.node_spineParent.getChildByName("spine"+t),n=e,o="idle";if(e>5){n=3;o=["A_idle","K_idle","Q_idle","J_idle"][e-6]}else if(e>1){n=2;o=["wang_idle","fish_idle","yuanbao_idle","fu_idle"][e-2]}if(i){i.active=!0;var a=i.getComponent(u.Skeleton);a.skeletonData=this.spines[n],a.setAnimation(0,o,!0)}var s=Math.floor(t/5),r=t%5;this.aniLines[r].hide(s)},s.initEvent=function(){var t=this;if(this._betIndex=I.betList.length>6?5:I.betList.length-1,this.updateBetlist(),I.initInfo.freeCount>0){this.changeScene(!0);var e=I.initInfo.freeBetAmount;this.txt_freeCount.string=""+(13-I.initInfo.freeCount);for(var i=0;i<I.betList.length;i++)if(I.betList[i]==e){this._betIndex=i,this.setData(I.betList[this._betIndex]);break}}I.on(D.SELECT_BET,(function(e){t.setData(e)}),this),I.on(D.START,(function(){t.runStart()}),this),this.aniLines.forEach((function(e){e.finishCallBack=function(){++t.finishColCount==t.aniLines.length&&null!=t.turnAudioId&&(M.instance.stopSound(t.turnAudioId),t.turnAudioId=null)}})),N.instance.on(jt.protocolHall.login,this.onReconnectSuccess,this)},s.onReconnectSuccess=function(){this.isWaitBet&&this.sendBet()},s.updateBetlist=function(){for(var t=this.node_betList.getChildByName("layout").children,e=0;e<t.length;e++){var i=t[e],n=I.betList[e];if(i.active=!!n,i.name=""+e,n)i.getChildByName("txt_bet").getComponent(c).string=B.numberFormat(n/R.Constant.moneyRatio,2)}this.setData(I.betList[this._betIndex])},s.onClickSelectBet=function(t){this.node_betList.active=!1;var e=parseInt(t.target.name);I.betList[e]&&(this._betIndex=e,this.setData(I.betList[this._betIndex]))},s.setData=function(t){if(t){this._bet=t;this.txt_bet.string=B.numberFormat(1*t/R.Constant.moneyRatio,2)}else this.onClickTryGame()},s.updateGold=function(t){void 0===t&&(t=0),this._try?this.txt_gold.string=B.numberFormat((A.tryGold+t)/R.Constant.moneyRatio,2):this.txt_gold.string=B.numberFormat(parseInt(C.instance.getUserDataForKey(k.GOLD)+t)/R.Constant.moneyRatio,2)+""},s.onClickBg=function(){this.node_betList.active=!1,this.node_autoBg.active=!1,this.toggle_menu.isChecked=!1,this.node_menu.active=!1},s.onClickRecord=function(){B.loadPopBuddle("prefab/FestivalRecord",I.bundle,(function(){}),(function(t){var e=b(t);E.instance.popNodeView(e,!0)}),!1)},s.onClickHelp=function(){B.loadPopBuddle("prefab/FestivalHelp",I.bundle,(function(){}),(function(t){var e=b(t);E.instance.popNodeView(e,!0)}),!1)},s.onClickBetList=function(){this._auto||this._isFree||(this.onClickBg(),this.node_betList.active=!0)},s.onClickChangeBet=function(t,e){"up"==e?(this._betIndex++,this._betIndex>=I.betList.length&&(this._betIndex=0)):(e="down")&&(this._betIndex--,this._betIndex<0&&(this._betIndex=I.betList.length-1)),this.setData(I.betList[this._betIndex])},s.onClickTryGame=function(){this._try=!0},s.onClickAuto=function(){this.onClickBg(),this._auto?(this._auto=!1,this.node_autoCancel.active=!1,this.txt_autoTimes.string=""):this.node_autoBg.active=!0},s.onClickCloseAuto=function(){this.node_autoBg.active=!1},s.onClickSelectAutoTimes=function(t,e){var i=parseInt(e);this._autoTime=i,this.txt_autoTimes.string=this._autoTime+"",this._auto=!0,this.node_autoCancel.active=!0,this.node_autoBg.active=!1,this._state==Zt&&this._auto&&this.changeState(Jt)},s.onClickQuick=function(){0==this._runDelay?this._runDelay=.2:this._runDelay=0},s.onClickStart=function(){if(!this.freeLock&&this._state!=qt&&this._state!=Xt&&!this._lock){var t=C.instance.getUserDataForKey(k.GOLD);if(!this._try&&t<this._bet)return B.showTip(w.lang.fishTip.gold,m.isMobile),void(this._auto=!1);this._isFree||this.updateGold(1*-this._bet),this.clear(),this.changeBtnActive(!1),this._state=qt,this._runTime=4665600000.8,this.sendBet()}},s.runStart=function(){var t=this;this.isWaitBet=!1,A.palyAudio(A.audio.TURN,(function(e){t.turnAudioId=e})),this._state=qt,this._runTime=te,this.finishColCount=0;for(var e=0;e<this.aniLines.length;e++)this.aniLines[e].run(0)},s.sendBet=function(){this._auto&&!this._isFree&&(this._autoTime--,this.txt_autoTimes.string=this._autoTime+"",this._autoTime<=0&&this.onClickAuto()),this._try||(this.isWaitBet=!0,x.instance.sendOnlineData(jt.ProtocolFestival.bet,{betAmount:this._bet+""}))},s.clear=function(){this.onClickBg(),this.txt_total.node.active=!1,this.txt_total.reset(),this.txt_win.reset(),I.result=null,this.hideLines(),this.hideSpine(),this._showLineIndex=0,this.node_spineMask.active=!1},s.showResult=function(){I.result&&this.checkAward()},s.checkAward=function(){var t=this;if(I.result.prizeAmount>0?(this.changeState(Yt),I.freeTotalWin+=this._isFree?I.result.prizeAmount:0):this.changeState($t),0==I.result.freeCount){if(this._isFree){this._isFree=!1,this.node_titleNormal.active=!0,this.node_titleFree.active=!1,this.gameBg.getComponent(d).spriteFrame=this.bgs[0],this.Node_freeEnd.active=!0,this.Label_win.node.getComponent(p).opacity=255;var e=I.freeTotalWin,i=0,n=I.freeTotalWin/10;g(this.Label_win.node.getComponent(p)).repeat(11,g().delay(.05).call((function(){(i+=n)>e&&(i=e),t.Label_win.string=B.numberFormat(i/R.Constant.moneyRatio,2)}))).delay(2).to(.2,{opacity:0}).call((function(){t.Node_freeEnd.active=!1,I.freeTotalWin=0})).start()}}else this.txt_freeCount.string=""+(13-I.result.freeCount);I.result.freePrize&&this.scheduleOnce((function(){t.showFreeLines(),t.changeScene(!0)}),.5),this._isFree||this.changeBtnActive(!0)},s.changeScene=function(t){var e=this;void 0===t&&(t=!1),this._isFree!=t&&(this._isFree=t,this.node_titleNormal.active=!t,this.node_titleFree.active=t,t?(this.freeLock=!0,this.freeTimeLeft=15,this.scheduleOnce((function(){e.node_freeBg.active=!0,e.freeTimeLeft=15,e.gameBg.spriteFrame=e.bgs[1]}),2)):this.gameBg.getComponent(d).spriteFrame=this.bgs[0])},s.changeState=function(t){var e=this;switch(t){case Jt:this._state=Jt;break;case Yt:this._state=Yt,this._runTime=2,this.scheduleOnce((function(){e.showAward()}),.5);break;case Xt:this.onClickStop();break;case qt:this.onClickStart();break;case Zt:this._state=Zt,this._runTime=2,this.showSignleLine();break;case $t:this._state=$t,this._runTime=1}},s.showAward=function(){var t=this;this._state==Yt&&(this.txt_win.value=I.result.prizeAmount,this.txt_total.node.active=!0,this.txt_total.value=I.result.prizeAmount,v.stopAllByTarget(this.txt_total.node),g(this.txt_total.node).delay(1.8).call((function(){t.txt_total.node.active=!1,t.txt_total.reset()})).start(),I.result.prizeAmount>0&&(A.palyAudio(A.audio.AWARD1),A.palyAudio(A.audio.AWARD2)),this.updateGold(),I.result.prizeAmount&&(this.showLines(),this.showWin()))},s.showWin=function(){this.spine_lion.setAnimation(0,"win",!1),this.spine_lion.addAnimation(0,"idle",!0)},s.showLines=function(){var t,e=null==(t=I.result)?void 0:t.prizeInfo;if(!e||0==e.length)return!1;var i=I.result.openNums;this.hideSpine(),this.node_spineMask.active=!0;for(var n=0;n<e.length;n++){for(var o=e[n].prizeIdx,a=0;a<o.length;a++){var s=o[a],r=i[s]-1;this.showSpine(s,r)}var l=Math.floor(o[0]/5);this.node_goldActions[l].active=!0,this.node_goldActions[l].string=B.numberFormat(e[n].prizeAmount/R.Constant.moneyRatio,2)}return!0},s.showFreeLines=function(){var t=I.result.openNums;this.node_spineMask.active=!0;for(var e=0;e<15;e++)1==t[e]&&this.showSpine(e,t[e]-1)},s.showSignleLine=function(){var t=I.result.prizeInfo;if(t&&0!=t.length){var e=this._showLineIndex%t.length;this.hideLines(),this.hideSpine();for(var i=I.result.openNums,n=t[e].prizeIdx,o=0;o<n.length;o++){var a=n[o],s=i[a]-1;this.showSpine(a,s)}var r=Math.floor(n[0]/5);this.node_goldActions[r].active=!0,this.node_goldActions[r].string=B.numberFormat(t[e].prizeAmount/R.Constant.moneyRatio,2)}else this.changeState(Jt)},s.hideLines=function(){},s.onClickMenu=function(t){this.node_autoBg.active=!1,this.node_betList.active=!1,this.node_menu.active=t.isChecked},s.onClickFree=function(){this.node_freeBg.active=!1,this.freeLock=!1},s.onClickStop=function(){var t=this;if(I.result&&this._state==qt)if(this._runTime>1)this._runTime-=1;else if(!this._lock){this._lock=!0,this._state=Xt,this._runTime=1;for(var e=I.result.openNums,i=function(i){var n=[e[i]-1,e[i+5]-1,e[i+10]-1];t.scheduleOnce((function(){t.aniLines[i].showResult(n)}),t._runDelay*i)},n=0;n<this.aniLines.length;n++)i(n);this.scheduleOnce((function(){t._lock=!1,t.showResult()}),3*this._runDelay+.3)}},s.changeBtnActive=function(t){var e=t?"idle":"spin";this.sp_start.setAnimation(0,e,!0);for(var i,n=a(this.btn_locks);!(i=n()).done;){var o=i.value;o.interactable=t,B.changeNodeEffect(o.target,!t)}},s.update=function(t){switch(this.freeLock&&(this.freeTimeLeft-=t,this.txt_freeTime.string=Math.ceil(this.freeTimeLeft)+"",this.freeTimeLeft<=0&&this.onClickFree()),this._state){case qt:this._runTime-=t,this._runTime<=0&&I.result&&this.changeState(Xt);break;case Xt:this._runTime-=t,this._runTime<=0&&this.changeState(Jt);break;case Yt:this._runTime-=t,this._runTime<=0&&(this.updateGold(),this._auto||this._isFree||I.result.freePrize?this.changeState(Jt):this.changeState(Zt));break;case Jt:(this._auto||this._isFree)&&this.onClickStart();break;case Zt:this._runTime-=t,this._runTime<=0&&(this._runTime=2,this._showLineIndex++,this.showSignleLine());break;case $t:this._runTime-=t,this._runTime<=0&&this.changeState(Jt)}},s.onDestroy=function(){L.close(this)},e}(y)).prototype,"cardSpriteFrames",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pt=e(bt.prototype,"spines",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gt=e(bt.prototype,"aniLines",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vt=e(bt.prototype,"sp_start",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(bt.prototype,"txt_bet",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(bt.prototype,"txt_win",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(bt.prototype,"txt_gold",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(bt.prototype,"node_spineMask",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=e(bt.prototype,"node_spineParent",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(bt.prototype,"spine_lion",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=e(bt.prototype,"node_menu",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=e(bt.prototype,"node_goldActions",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),At=e(bt.prototype,"node_autoCancel",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(bt.prototype,"node_autoBg",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(bt.prototype,"node_titleNormal",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=e(bt.prototype,"node_titleFree",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(bt.prototype,"txt_freeCount",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=e(bt.prototype,"btn_locks",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rt=e(bt.prototype,"node_freeBg",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(bt.prototype,"txt_freeTime",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(bt.prototype,"Node_freeEnd",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(bt.prototype,"Label_win",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=e(bt.prototype,"bgs",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pt=e(bt.prototype,"gameBg",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=e(bt.prototype,"txt_autoTimes",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(bt.prototype,"txt_total",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ht=e(bt.prototype,"node_betList",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(bt.prototype,"toggle_menu",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=bt))||_t)||_t));s._RF.pop()}}}));

System.register("chunks:///_virtual/FestivalScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetManager.ts","./ViewManager.ts","./FestivalDef.ts","./Common.ts","./MainManager.ts","./FestivalProxy.ts"],(function(e){var t,n,o,i,a,s,r,c,l,u,f,h,p,d,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Prefab,c=e.instantiate,l=e.Component},function(e){u=e.default},function(e){f=e.default},function(e){h=e.FestivalDef},function(e){p=e.Common},function(e){d=e.default},function(e){m=e.default}],execute:function(){var v,g,S,w,y,b,C,_;a._RF.push({},"b5d23cmrChLvJ/fxZGJeBS3","FestivalScene",void 0);var F=s.ccclass,P=s.menu,D=s.property,M=d.instance.getConfigManager(),k=d.instance.getEventManager();e("default",(v=F("FestivalScene"),g=P("game/FestivalGame/FestivalScene"),S=D(r),w=D(r),v(y=g((C=t((b=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,o(t,"pre_desk",C,i(t)),o(t,"pre_room",_,i(t)),t.node_desk=null,t.node_room=null,t}n(t,e);var a=t.prototype;return a.onLoad=function(){h.init(),this.init()},a.start=function(){var e=c(this.pre_room);this.node.addChild(e)},a.init=function(){this.reset(),h.palyMusic(h.audio.BG)},a.reset=function(){},a.gameShow=function(){p.closeWait(),u.instance.netState&&u.instance.waitServiceSendData()},a.disConnect=function(){p.showWait()},a.closePop=function(e){f.instance.closePopView()},a.onEnable=function(){m.registSocketEvent(),k.on(M.eventTransform.gameShow,this.gameShow,this),k.on(M.protocolHall.login,this.gameShow,this),k.on(M.ButtonEvent.closePop,this.closePop,this),k.on(M.eventTransform.disConnect,this.disConnect,this)},a.onDisable=function(){m.removeSocketEvent(),k.off(M.eventTransform.gameShow,this.gameShow,this),k.off(M.protocolHall.login,this.gameShow,this),k.off(M.ButtonEvent.closePop,this.closePop,this),k.on(M.eventTransform.disConnect,this.disConnect,this)},a.onDestroy=function(){},t}(l)).prototype,"pre_desk",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(b.prototype,"pre_room",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y)||y));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/FestivalGame', 'chunks:///_virtual/FestivalGame'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});